[Net.ServicePointManager]::SecurityProtocol = [Net.SecurityProtocolType]::Tls12; (New-Object Net.WebClient).DownloadFile("https://download.aporeto.com/prismacloud/app/apoctl/windows/apoctl.exe", "$env:PROGRAMDATA\apoctl.exe"); if ($?) {& $env:PROGRAMDATA\apoctl.exe enforcer install windows --auth-mode appcred --api https://api.east-02.network.prismacloud.io --namespace /807152304871829504/on-prem-vm/vm --token eyJhbGciOiJFUzI1NiIsInR5cCI6IkpXVCJ9.eyJyZWFsbSI6IlBDSWRlbnRpdHlUb2tlbiIsImRhdGEiOnsibmFtZXNwYWNlIjoiIiwicHJpc21haWQiOiI4MDcxNTIzMDQ4NzE4Mjk1MDQiLCJyZWFsbSI6InBjaWRlbnRpdHl0b2tlbiIsInN1YmplY3QiOiJrYnV0bGVyQHBhbG9hbHRvbmV0d29ya3MuY29tIiwidXNlcm5hbWUiOiJrYnV0bGVyQHBhbG9hbHRvbmV0d29ya3MuY29tIiwidXNlcnJvbGVpZCI6IjZhZmQzZWUxLWY0MjktNDY2Ni05NjFkLTNhNzMzOGUxMGJiOCIsInVzZXJyb2xlbmFtZSI6IlN5c3RlbSBBZG1pbiIsInVzZXJyb2xldHlwZWlkIjoiMSIsInVzZXJyb2xldHlwZW5hbWUiOiJTeXN0ZW0gQWRtaW4ifSwicmVzdHJpY3Rpb25zIjp7InBlcm1zIjpbIkBhdXRoOnJvbGU9ZW5mb3JjZXIiLCJAYXV0aDpyb2xlPWVuZm9yY2VyLWluc3RhbGxlciIsIkBhdXRoOnJvbGU9YWdncmVnYXRlZC1hcGlzZXJ2ZXIiXSwibmFtZXNwYWNlIjoiLzgwNzE1MjMwNDg3MTgyOTUwNC9vbi1wcmVtLXZtL3ZtIn0sImV4cCI6MTYzNzYzNDE3NiwiaWF0IjoxNjM3NjMyMzc1LCJpc3MiOiJodHRwczovL2FwaS5lYXN0LTAyLm5ldHdvcmsucHJpc21hY2xvdWQuaW8iLCJzdWIiOiJrYnV0bGVyQHBhbG9hbHRvbmV0d29ya3MuY29tIn0.OCglTrJqgxP3mn4fgTg29rESz5evRCqEWzlGRAcBMaNgmp63oO6rZ4gtY4_Lo-2eJX23tPmXGfSUB0KU9eidAg }; if ($?) {del $env:PROGRAMDATA\apoctl.exe};
